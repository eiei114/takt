---
tags:
  - type/project
  - project/escape-minerals
  - theme/roblox
created: 2026-02-21
modified: 2026-02-21
lead: "Escape Tsunami For Minerals! の要件定義書。機能要件・非機能要件・受け入れ基準を網羅。MVPと拡張機能を明確に分離。"
---

# Escape Tsunami For Minerals! 要件定義書

## 概要

| 項目 | 内容 |
|------|------|
| **タイトル** | Escape Tsunami For Minerals! |
| **プラットフォーム** | Roblox |
| **開発体制** | ソロ開発 |
| **開発期間** | 2週間 |
| **ジャンル** | Escape / Survival + Collection |
| **対象プレイヤー** | 全年齢（Robloxコア層: 8〜16歳） |

### ゲームコンセプト

上昇する水（Tsunami）から逃げながら高所に登り、各マップに配置された鉱石を収集する。収集した鉱石を通貨として使用してアップグレードを購入し、より高く・速く・効率よく鉱石を集めることを目指す。プレステージシステムにより長期的なリプレイ性を確保する。

### 鉱石ヒエラルキー

```
Dirt → Stone → Coal → Copper → Iron → Gold → Lapis → Diamond → Emerald → Netherite
 低価値 ←────────────────────────────────────────────────── 高価値 →
 低所 ←─────────────────────────────────────────────────── 高所 →
```

### マップ構成

| # | マップ名 | 難易度 | テーマ |
|---|---------|--------|--------|
| 1 | Beginner Canyon | ★☆☆☆☆ | 基本地形、広い足場 |
| 2 | Rocky Mountain | ★★☆☆☆ | 急斜面、岩棚 |
| 3 | Crystal Cave | ★★★☆☆ | 洞窟、視界制限 |
| 4 | Lava Pit | ★★★★☆ | 溶岩障害物、ジャンプ台 |
| 5 | The Void | ★★★★★ | 浮島、落下リスク最大 |

---

## 1. 機能要件 (Functional Requirements)

### 1-1. MVP — Week 1（Must Have）

#### FR-001: ラウンドシステム

**概要:** ゲームの基本サイクルを管理するラウンドシステム

| 項目 | 仕様 |
|------|------|
| カウントダウン | ラウンド開始前に5秒カウントダウンを表示 |
| 水位上昇 | ラウンド開始後、一定速度（段階的加速あり）で水位が上昇 |
| ラウンド終了 | プレイヤーが水に触れた瞬間にラウンド終了 |
| ラウンド時間 | 目標60〜90秒（マップ・アップグレードにより変動） |

**受け入れ基準:**
- [ ] カウントダウン終了後にラウンドが正常に開始される
- [ ] 水位が設定した速度で正しく上昇する
- [ ] 水接触時に即座にラウンド終了が発火する
- [ ] 複数プレイヤーが同一ラウンドに参加できる

---

#### FR-002: プレイヤー移動

**概要:** PC・モバイル・Xboxの全プラットフォームに対応した操作系

| 入力 | PC | モバイル | Xbox |
|------|-----|---------|------|
| 移動 | WASD / 矢印キー | 仮想ジョイスティック | 左スティック |
| ジャンプ | スペースキー | ジャンプボタン | Aボタン |

**受け入れ基準:**
- [ ] PC・モバイルの両方で遅延なく操作できる
- [ ] モバイルの仮想ジョイスティックが適切な位置に表示される
- [ ] Xboxコントローラーで全操作が可能

---

#### FR-003: 鉱石収集

**概要:** マップ上に配置された鉱石をタッチして収集するコアメカニクス

| 項目 | 仕様 |
|------|------|
| 配置方式 | ラウンド開始時にスポーンポイントからランダム配置 |
| 収集方式 | プレイヤーのヒットボックスと触れた瞬間に収集 |
| 配置規則 | 高い位置ほどレアな鉱石（Dirt: 地上付近、Netherite: 最上部） |
| 通貨換算 | 鉱石種別ごとに固定の通貨換算レート |

**鉱石換算レート（暫定）:**

| 鉱石 | 換算レート |
|------|-----------|
| Dirt | 1 |
| Stone | 3 |
| Coal | 7 |
| Copper | 15 |
| Iron | 30 |
| Gold | 60 |
| Lapis | 100 |
| Diamond | 200 |
| Emerald | 400 |
| Netherite | 1,000 |

**受け入れ基準:**
- [ ] 全10種類の鉱石が正しくスポーン・収集できる
- [ ] 収集後に鉱石オブジェクトが即座に消える
- [ ] 通貨が正しく加算されHUDに反映される
- [ ] 同一鉱石を複数プレイヤーが重複収集しない（サーバーサイド確認）

---

#### FR-004: 通貨システム

**概要:** 鉱石収集で獲得した通貨を管理・永続保存するシステム

| 項目 | 仕様 |
|------|------|
| 通貨名 | Minerals（仮） |
| 獲得方法 | 鉱石収集、ラウンドボーナス |
| 保存方式 | Roblox DataStore API |
| 保存タイミング | 60秒ごと自動保存 + プレイヤー退出時 |

**受け入れ基準:**
- [ ] サーバー退出後に再接続してもデータが保持される
- [ ] Session lockingによる同時書き込みの競合を防止する
- [ ] DataStore APIのエラー時にリトライ処理が動作する

---

#### FR-005: アップグレードショップ

**概要:** 収集した通貨を使って能力を恒久的に強化するショップ

**MVP対応アップグレード（3種）:**

| アップグレード | 効果 | 最大レベル |
|--------------|------|-----------|
| Speed | 移動速度アップ | Lv.10 |
| Jump Power | ジャンプ力アップ | Lv.10 |
| Magnet | 鉱石の吸引範囲拡大 | Lv.5 |

**コスト計算式:** `BaseCost × 1.5 ^ (level - 1)`

| アップグレード | BaseCost |
|--------------|----------|
| Speed | 100 |
| Jump Power | 150 |
| Magnet | 300 |

**受け入れ基準:**
- [ ] 購入後に効果が即座に反映される
- [ ] 所持通貨が不足している場合に購入ボタンが非活性化する
- [ ] 最大レベル到達後に「MAX」表示に切り替わる
- [ ] 購入データがDataStoreに永続保存される

---

#### FR-006: マップ1 — Beginner Canyon

**概要:** 初心者向けの基本マップ。広い足場と少ない障害物で構成

| 項目 | 仕様 |
|------|------|
| 地形 | 広いプラットフォーム、段差少なめ、視界良好 |
| 鉱石スポーンポイント | 50箇所以上 |
| 鉱石構成比 | Dirt 40% / Stone 25% / Coal 15% / Copper 10% / Iron以上 10% |
| 目標ラウンド時間 | 60秒 |

**受け入れ基準:**
- [ ] 60秒のラウンドが成立する水位上昇速度が設定されている
- [ ] 50箇所以上のスポーンポイントが機能する
- [ ] モバイル端末で60FPSを維持できる

---

#### FR-007: HUD（ヘッドアップディスプレイ）

**概要:** ゲームプレイ中に必要な情報をリアルタイムで表示するUI

| 表示要素 | 内容 | 更新頻度 |
|---------|------|---------|
| 所持通貨 | 現在の累計通貨量 | リアルタイム |
| ラウンド番号 | 現在のラウンド数 | ラウンド開始時 |
| 水位インジケータ | 水面の現在高度（%またはビジュアル） | リアルタイム |
| 生存プレイヤー数 | 残り生存プレイヤー数 | リアルタイム |

**受け入れ基準:**
- [ ] 全表示要素がリアルタイムで更新される
- [ ] モバイル画面サイズでも視認性が確保される
- [ ] HUD要素がゲームプレイの妨げにならない位置に配置される

---

#### FR-008: デス画面

**概要:** ラウンド終了時に表示される結果画面

| 表示要素 | 内容 |
|---------|------|
| 獲得鉱石サマリー | 種別ごとの収集数と獲得通貨 |
| ラウンド生存時間 | 今回ラウンドの生存秒数 |
| 累計通貨 | ショップで使える総通貨量 |
| "Play Again" ボタン | 次ラウンドへ即時移行 |
| "Shop" ボタン | アップグレードショップを開く |

**受け入れ基準:**
- [ ] "Play Again" タップから1秒以内に次ラウンドが開始される
- [ ] 鉱石サマリーが正確に集計されている
- [ ] 2タップ以内で次ラウンドに参加できる

---

### 1-2. Extended — Week 2（Should Have）

#### FR-009: マップ2 — Rocky Mountain

**概要:** 急斜面と岩棚で構成された中級マップ

| 項目 | 仕様 |
|------|------|
| 地形 | 急斜面、岩棚、狭い足場 |
| 追加ギミック | スライドする岩 |
| 鉱石構成比 | Beginner Canyonより高レア寄りにシフト |
| アンロック条件 | ラウンド10回クリア または 一定通貨到達 |

**受け入れ基準:**
- [ ] アンロック条件達成後にマップが選択可能になる
- [ ] 地形ギミックが正しく動作する

---

#### FR-010: マップ3 — Crystal Cave

**概要:** 洞窟内部を舞台にした中〜上級マップ

| 項目 | 仕様 |
|------|------|
| 地形 | 洞窟地形、視界制限あり、光源によるエフェクト |
| 追加ギミック | クリスタルジャンプ台（踏むと跳ねる） |
| 鉱石構成比 | Diamond・Emerald・Netheritのスポーン確率上昇 |

**受け入れ基準:**
- [ ] 視界制限ギミックが動作する
- [ ] ジャンプ台が正しく機能する

---

#### FR-011: 追加アップグレード — Double Jump / Triple Jump

**概要:** ジャンプ回数を増やす解放型アップグレード

| アップグレード | 効果 | 解放条件 |
|--------------|------|---------|
| Double Jump | 空中で1回追加ジャンプ可能 | Jump Power Lv.5 |
| Triple Jump | 空中で2回追加ジャンプ可能 | Double Jump + Jump Power Lv.10 |

**受け入れ基準:**
- [ ] 解放条件達成後にショップに表示される
- [ ] 空中ジャンプが正確に機能する
- [ ] 地面接触でジャンプ回数がリセットされる

---

#### FR-012: 追加アップグレード — Lucky Boost / Shield

| アップグレード | 効果 | 仕様 |
|--------------|------|------|
| Lucky Boost | 一定確率でレア鉱石ドロップ率アップ | Lv.1〜5、確率+5%/Lv |
| Shield | 水接触時に一定時間保護（1ラウンド1回） | Lv.1〜3、保護時間1〜3秒 |

**受け入れ基準:**
- [ ] Lucky Boostの確率補正がサーバーサイドで処理される
- [ ] Shieldの発動・冷却タイマーが正確に動作する

---

#### FR-013: プレステージシステム

**概要:** 最高マップクリア後に全アップグレードをリセットし永続ボーナスを獲得するシステム

| 項目 | 仕様 |
|------|------|
| 解放条件 | 全マップで一定ラウンドクリア |
| リセット対象 | 全アップグレードレベル、現在の通貨 |
| 永続ボーナス | 通貨獲得量にプレステージ段階ごとの乗数（+10%/段階） |
| 最大プレステージ | 10段階（暫定） |
| バッジ | プレステージ段階ごとに専用バッジを付与 |

**受け入れ基準:**
- [ ] プレステージ実行時に確認ダイアログが表示される
- [ ] プレステージ後のボーナス乗数が正しく計算される
- [ ] プレステージデータがDataStoreに永続保存される

---

#### FR-014: リーダーボード

**概要:** プレイヤー間の競争を促進するランキングシステム

| 種別 | 集計対象 | リセット周期 |
|------|---------|------------|
| デイリー | 当日獲得通貨量 | 毎日0時（UTC） |
| ウィークリー | 週間獲得通貨量 | 毎週月曜0時（UTC） |
| 全期間 | 累計獲得通貨量 | リセットなし |

**受け入れ基準:**
- [ ] リーダーボードが最大100位まで表示される
- [ ] 自分の順位が常に表示される（100位圏外でも）
- [ ] OrderedDataStoreを使用して正確な順位が取得できる

---

#### FR-015: GamePass

**概要:** 有料GamePassによるマネタイズ

| GamePass | 効果 | 想定価格 |
|---------|------|---------|
| 2x Minerals | 全鉱石の通貨換算レート2倍 | 299 Robux |
| VIP Trail | プレイヤーの軌跡エフェクト | 99 Robux |

**受け入れ基準:**
- [ ] GamePass購入後に即座に効果が適用される
- [ ] サーバーサイドでGamePass所持を検証する（クライアント信頼不可）
- [ ] ゲームバランスを崩さない範囲の効果に留める

---

#### FR-016: ロビーシステム

**概要:** ラウンド間・待機中のロビーエリア

| 要素 | 仕様 |
|------|------|
| リーダーボード表示 | ロビー内に常時表示（デイリー/全期間切替） |
| プレステージバッジ | プレイヤー名前上にプレステージ段階バッジを表示 |
| ショップアクセス | ロビーからアップグレードショップを開ける |
| マップ選択 | ロビーでマップを選択してラウンド参加 |

**受け入れ基準:**
- [ ] ロビーから直接ショップにアクセスできる
- [ ] プレステージバッジが正確に表示される

---

#### FR-017: スペクテーターモード

**概要:** ラウンド中に脱落したプレイヤーが他プレイヤーを観戦できるモード

| 項目 | 仕様 |
|------|------|
| 発動条件 | プレイヤーが水に接触してラウンド終了後 |
| 切り替え | 生存プレイヤー間を自由に切り替え可能 |
| HUD | スペクテーター専用HUD（観戦中のプレイヤー名・通貨表示） |

**受け入れ基準:**
- [ ] 脱落後に自動でスペクテーターモードに移行する
- [ ] 観戦対象を左右ボタンで切り替えられる

---

#### FR-018: サウンドシステム

**概要:** BGMとSFXによる音響演出

| カテゴリ | 内容 |
|---------|------|
| BGM | ロビー用BGM、各マップ用BGM（テーマに合わせた雰囲気） |
| SFX | 鉱石収集音、水接触音、アップグレード購入音、カウントダウン音 |
| 設定 | BGM音量・SFX音量の個別調整スライダー |

**受け入れ基準:**
- [ ] 全SFXが対応するアクションに即座に再生される
- [ ] BGMがシームレスにループする
- [ ] 音量設定がDataStoreに保存される

---

### 1-3. Future — Post-launch（Could Have）

| ID | 機能 | 概要 |
|----|------|------|
| FR-019 | マップ4 — Lava Pit | 溶岩障害物、上昇する溶岩ギミック |
| FR-020 | マップ5 — The Void | 浮島、落下即死、最高難易度 |
| FR-021 | シーズンイベント | 季節限定マップ・限定鉱石・シーズンランキング |
| FR-022 | 限定鉱石 | イベント限定の特別鉱石（高価値・特殊エフェクト） |
| FR-023 | フレンド招待ボーナス | フレンド招待で双方にボーナス通貨付与 |
| FR-024 | トレードシステム | プレイヤー間での鉱石取引 |
| FR-025 | カスタムマップエディタ | プレイヤーが独自マップを作成・公開 |

---

## 2. 非機能要件 (Non-Functional Requirements)

### NFR-001: パフォーマンス

| 指標 | 目標値 | 測定方法 |
|------|--------|---------|
| フレームレート | 60FPS（PC）/ 30FPS以上（モバイル） | Roblox Stats |
| サーバーティック | 60Hz | Server Stats |
| ネットワーク遅延 | 200ms以下で快適プレイ可能 | Ping表示 |
| ロード時間 | マップロード5秒以内 | タイマー計測 |

**最適化方針:**
- パーツ数を最小限に抑える（マップ1あたり目標: Union/MeshPart活用で1000パーツ以下）
- LOD（Level of Detail）対応
- ストリーミングEnabled設定の活用

---

### NFR-002: スケーラビリティ

| 項目 | 仕様 |
|------|------|
| 1サーバー最大プレイヤー数 | 20人 |
| 想定同時サーバー数 | 最大1,000サーバー |
| DataStoreリクエスト制限 | Robloxの制限（60リクエスト/分）を超えない設計 |

---

### NFR-003: データ永続性

| 項目 | 仕様 |
|------|------|
| 自動保存間隔 | 60秒ごと |
| 退出時保存 | PlayerRemoving イベントで即時保存 |
| データ損失率 | 0.01%以下 |
| Session Locking | 同一プレイヤーの重複サーバー接続時にデータ競合を防止 |
| バックアップ | DataStore2 または ProfileService ライブラリの使用を検討 |

**DataStore設計（保存データ構造）:**

```lua
PlayerData = {
  currencies = {
    minerals = 0
  },
  upgrades = {
    speed = 0,
    jumpPower = 0,
    magnet = 0,
    doubleJump = false,
    tripleJump = false,
    luckyBoost = 0,
    shield = 0
  },
  stats = {
    totalRounds = 0,
    totalMineralsCollected = 0,
    prestigeLevel = 0
  },
  settings = {
    bgmVolume = 0.5,
    sfxVolume = 0.8
  }
}
```

---

### NFR-004: セキュリティ

| 脅威 | 対策 |
|------|------|
| 通貨不正増加 | 全通貨操作をサーバーサイドで処理（RemoteEvent経由） |
| アップグレード不正 | 購入処理はサーバー関数（RemoteFunction）で検証 |
| スピードハック | サーバーサイドで移動速度の上限チェック（許容値+20%を超えたらフラグ） |
| 重複収集 | 収集済み鉱石のIDをサーバー側で管理（Set使用） |
| GamePass偽装 | `MarketplaceService:UserOwnsGamePassAsync()` でサーバー検証 |

**セキュリティ原則:** クライアントを信頼しない（Never trust the client）

---

### NFR-005: ユーザーエクスペリエンス

| 指標 | 目標値 |
|------|--------|
| 初回プレイからコアループ体験まで | 30秒以内 |
| 1ラウンドの目標時間 | 60〜90秒 |
| デス画面から次ラウンド開始まで | 2タップ以内、3秒以内 |
| チュートリアル完了率 | 80%以上（ゲーム内ガイドで誘導） |

**UX設計原則:**
- 短いラウンド = 低コミットメント = 「もう1回」の心理を促進
- 明確な進行感（アップグレードレベルの可視化）
- 即時フィードバック（鉱石収集時のエフェクト・サウンド）

---

### NFR-006: 対応プラットフォーム

| プラットフォーム | 対応状況 | 備考 |
|----------------|---------|------|
| PC (Windows/Mac) | 必須対応 | キーボード操作 |
| モバイル (iOS/Android) | 必須対応 | 仮想ジョイスティック |
| Xbox | 対応 | コントローラーマッピング |
| VR | 対象外 | |

---

### NFR-007: 可用性

| 指標 | 目標値 |
|------|--------|
| アップタイム | 99.5%以上（Roblox基盤依存） |
| メンテナンス通知 | 予定メンテナンスは24時間前にゲーム内通知 |

---

## 3. 優先度マトリクス

### P0 — Must Have（Week 1で必須）

| ID | 機能 |
|----|------|
| FR-001 | ラウンドシステム |
| FR-002 | プレイヤー移動 |
| FR-003 | 鉱石収集 |
| FR-004 | 通貨システム |
| FR-005 | アップグレードショップ（Speed/Jump/Magnet） |
| FR-006 | マップ1（Beginner Canyon） |
| FR-007 | HUD |
| FR-008 | デス画面 |
| NFR-001 | パフォーマンス |
| NFR-002 | スケーラビリティ |
| NFR-003 | データ永続性 |
| NFR-004 | セキュリティ |
| NFR-005 | UX |
| NFR-006 | 対応プラットフォーム |

### P1 — Should Have（Week 2で実装）

| ID | 機能 |
|----|------|
| FR-009 | マップ2（Rocky Mountain） |
| FR-010 | マップ3（Crystal Cave） |
| FR-011 | Double Jump / Triple Jump |
| FR-012 | Lucky Boost / Shield |
| FR-013 | プレステージシステム |
| FR-014 | リーダーボード |
| FR-015 | GamePass（2x Minerals, VIP Trail） |
| FR-016 | ロビーシステム |
| FR-017 | スペクテーターモード |
| FR-018 | サウンドシステム |

### P2 — Could Have（Post-launch）

| ID | 機能 |
|----|------|
| FR-019 | マップ4（Lava Pit） |
| FR-020 | マップ5（The Void） |
| FR-021 | シーズンイベント |
| FR-022 | 限定鉱石 |
| FR-023 | フレンド招待ボーナス |
| FR-024 | トレードシステム |
| FR-025 | カスタムマップエディタ |

---

## 4. 開発スケジュール（2週間）

### Week 1 — Core Loop（P0実装）

| 日程 | 作業内容 |
|------|---------|
| Day 1〜2 | プロジェクトセットアップ、DataStore設計、基本Move/Jumpの実装 |
| Day 3 | ラウンドシステム、水位上昇ロジックの実装 |
| Day 4 | マップ1（Beginner Canyon）の地形作成、鉱石スポーンシステム |
| Day 5 | 通貨システム、アップグレードショップ（Speed/Jump/Magnet） |
| Day 6 | HUD、デス画面の実装 |
| Day 7 | セキュリティ実装、バグ修正、モバイル対応確認 |

### Week 2 — Content & Polish（P1実装）

| 日程 | 作業内容 |
|------|---------|
| Day 8〜9 | マップ2〜3の地形作成 |
| Day 10 | プレステージシステム、Double Jump/Triple Jump |
| Day 11 | リーダーボード、ロビーシステム |
| Day 12 | GamePass実装、Lucky Boost/Shield |
| Day 13 | サウンドシステム、スペクテーターモード |
| Day 14 | 総合テスト、バグ修正、公開準備 |

---

## 5. リスクと対策

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|---------|------|
| DataStoreのレート制限超過 | 高 | 中 | バッチ保存、キャッシュ設計 |
| モバイルでの60FPS割れ | 高 | 中 | 早期にモバイル実機テスト実施 |
| 水位上昇の難易度バランス | 中 | 高 | パラメータを外部設定化して調整容易に |
| チート・Exploit対策漏れ | 高 | 中 | 全RemoteEventをサーバー検証、週1でセキュリティレビュー |
| Week 2の機能が間に合わない | 中 | 中 | P1の下位機能（スペクテーター等）は延期可能として設計 |

---

## 6. 関連ドキュメント

- `4_Project/Escape-Minerals/` — プロジェクトルート
- `4_Project/X - Roblox Creator Growth/Docs/Core-Loop-Analysis_20260214.md` — 参考コアループ分析

---

*最終更新: 2026-02-21*
